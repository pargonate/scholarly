---
import { supabase } from "../lib/supabase";

// Get the User
const { data: userData } = await supabase.auth.getUser();

const user = userData.user;
const metadata = user?.user_metadata;

// Get their Role
const { data: userRole } = await supabase.from("user_roles").select().eq("id", user.id);
---

<nav>
	<a href="/">
		<h1>Scholarly</h1>
	</a>
	<a href="/courses">Courses</a>
	<a href="/schedule">Schedule</a>
	<a href="/credits">Credits</a>
	<div>
		<p>{metadata?.first_name} {metadata?.last_name}</p>
		<p>{userRole[0].role}</p>
		<form action="/api/auth/logout">
			<button type="submit">Sign out</button>
		</form>
	</div>
</nav>
<style>
	nav {
		display: flex;
		align-items: center;
		justify-content: space-around;
		height: 75px;
		background-color: #000;
		color: #FFF;
	}

	nav a {
		color: #FFF;
		text-decoration: none;
	}
</style>