---
import Layout from "../layouts/Layout.astro";

import { XataClient } from "../xata";

const xata = new XataClient({
	apiKey: import.meta.env.XATA_API_KEY,
	branch: import.meta.env.XATA_BRANCH
});

const { records } = await xata.db.courses.getPaginated({
	pagination: {
		size: 50
	}
})
---
<Layout title="Index" description="Index">
	<table>
		<thead>
			<tr>
				<th>Course ID</th>
				<th>Course Name</th>
				<th>Course Subject</th>
				<th>Course Description</th>
				<th>Course Credits</th>
			</tr>
		</thead>
		<tbody>
			{records.map((course) => (
				<tr>
					<td>{course.xata_id}</td>
					<td>{course.name}</td>
					<td>{course.subject}</td>
					<td>{course.description}</td>
					<td>{course.credits}</td>
				</tr>
			))}
		</tbody>
	</table>
	<div id="control-panel">
		<a href=""></a>
	</div>
	<style>
		table {
			border-collapse: collapse;
			width: 100%;
		}

		th,
		td {
			border: 1px solid #ddd;
			padding: 8px;
		}

		th {
			background-color: #f2f2f2;
			text-align: left;
		}
	</style>
</Layout>
